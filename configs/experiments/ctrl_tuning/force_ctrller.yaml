# Force Controller Tuning Configuration
# For use with test_hybrid_controller.py script

# Base configuration to inherit from
base_config: "configs/base/PiH_base.yaml"

primary:
  seed: 42  # Fixed seed for reproducibility
  num_envs_per_agent: 1  # Single environment for tuning
  agents_per_break_force: 1
  break_forces: [10000]  # Unbreakable peg for tuning
  ctrl_torque: false  # 3DOF force control only

# Enable hybrid control wrapper
wrappers:
  hybrid_control:
    enabled: true
    reward_type: "none"  # No reward needed for manual control
    use_ground_truth_selection: false  # We control selection manually
    

  factory_metrics:
    enabled: true
    publish_to_wandb: false

  dynamics_randomization:
    enabled: false

  wandb_logging:
    enabled: false

  pose_contact_logging:
    enabled: false

environment:
  scene:
    num_envs: 1
    
  ctrl:
    force_action_bounds: [50.0, 50.0, 50.0]
    torque_action_bounds: [0.5, 0.5, 0.5]
    force_action_threshold: [10.0, 10.0, 10.0]
    torque_action_threshold: [0.1, 0.1, 0.1]
    default_task_prop_gains: [100, 100, 100, 30, 30, 30]
    default_task_force_gains: [0.5, 0.5, 0.5, 0.001, 0.001, 0.001]

    #default_task_force_gains: [0.8, 0.8, 0.8, 0.001, 0.001, 0.001]
    #default_task_prop_gains: [250, 250, 250, 30, 30, 30]
    ema_factor: 1.0  # 1.0 = no smoothing, use raw actions directly
    use_delta_force: false

  # No observation noise for tuning
  obs_rand:
    fixed_asset_pos: [0.0, 0.0, 0.0]
    ee_pos: [0.0, 0.0, 0.0]
    force_torque: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0]

experiment:
  name: "force_controller_tuning"
  tags: ["tuning", "hybrid_control"]
  group: "ctrl_tuning"
